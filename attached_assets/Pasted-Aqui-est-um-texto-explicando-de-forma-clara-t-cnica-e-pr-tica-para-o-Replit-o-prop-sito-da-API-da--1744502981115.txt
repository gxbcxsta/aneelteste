Aqui estÃ¡ um texto explicando de forma clara, tÃ©cnica e prÃ¡tica para o Replit o propÃ³sito da API da Utmify, como usÃ¡-la corretamente no seu projeto, onde exatamente utilizar, quais dados enviar e qual token usar.

ðŸ”Œ IntegraÃ§Ã£o com a API da UTMIFY no Replit
âœ… Objetivo da API da UTMIFY
A API da Utmify serve para metrificar e registrar vendas, capturando dados como:

Origem de trÃ¡fego (utm_source, utm_campaign, etc),

InformaÃ§Ãµes do cliente (nome, e-mail, telefone, IP...),

Produto vendido,

MÃ©todo e status do pagamento (PIX gerado, PIX pago),

Valores da transaÃ§Ã£o e comissÃµes.

Essa mÃ©trica Ã© essencial para acompanhamento de conversÃ£o e eficiÃªncia de campanhas de trÃ¡fego pago.

ðŸ” Token de autenticaÃ§Ã£o
Substitua o token de exemplo da documentaÃ§Ã£o pelo seu token exclusivo:

http
Copiar
Editar
x-api-token: XAo52G3UkJ6ePs7Aq3UqHs32hvDPZ8rjUog4
Esse token deve estar presente nos headers de todas as requisiÃ§Ãµes enviadas para:

arduino
Copiar
Editar
https://api.utmify.com.br/api-credentials/orders
ðŸ“Œ Onde exatamente usar a API
VocÃª sÃ³ precisa enviar dados para a API da Utmify nas pÃ¡ginas de pagamento com PIX, que sÃ£o:

/pagamento

/pagamento-tcn

/pagamento-lar

ðŸ” Como usar a API em cada pÃ¡gina
ðŸ§¾ PÃ¡gina: /pagamento
Aqui o usuÃ¡rio gera o PIX da taxa TRE no valor de R$ 74,90.

VocÃª deve fazer duas chamadas para a API da UTMIFY:

Quando o PIX for gerado: status "waiting_payment"

Quando o PIX for pago: status "paid"

Quando o pagamento for confirmado, o usuÃ¡rio serÃ¡ redirecionado para /taxa-complementar, entÃ£o esse redirecionamento pode servir como gatilho de envio do status "paid" para a API.

Se o usuÃ¡rio nÃ£o pagar e apenas gerar o PIX, envie somente o status "waiting_payment".

ðŸ§¾ PÃ¡gina: /pagamento-tcn
Aqui significa que o usuÃ¡rio jÃ¡ pagou a taxa da pÃ¡gina anterior (/pagamento).

Ele vai realizar o pagamento da taxa TCN e, se pago com sucesso, serÃ¡ redirecionado para /taxa-lar.

Assim como na anterior, envie:

status: "waiting_payment" quando gerar o PIX

status: "paid" quando redirecionar para /taxa-lar

ðŸ§¾ PÃ¡gina: /pagamento-lar
Nesta pÃ¡gina, o usuÃ¡rio jÃ¡ pagou TRE + TCN, e agora vai pagar a taxa LAR.

Quando ele finalizar o pagamento, serÃ¡ redirecionado para a pÃ¡gina /sucesso.

Nesse redirecionamento, envie status: "paid" indicando que ele pagou as 3 taxas.

âœ… PÃ¡gina: /sucesso
Essa pÃ¡gina confirma que o usuÃ¡rio pagou todas as taxas.

Ao acessÃ¡-la, envie o status final "paid" para a API da Utmify, com os dados da Ãºltima transaÃ§Ã£o (taxa LAR).

ðŸ›  Exemplo de cÃ³digo no Replit (fetch em JavaScript)
js
Copiar
Editar
fetch("https://api.utmify.com.br/api-credentials/orders", {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
    "x-api-token": "XAo52G3UkJ6ePs7Aq3UqHs32hvDPZ8rjUog4"
  },
  body: JSON.stringify({
    orderId: "ID_UNICO_DA_VENDA",
    platform: "MinhaPlataforma",
    paymentMethod: "pix",
    status: "paid", // ou "waiting_payment"
    createdAt: "2025-04-12 14:00:00",
    approvedDate: "2025-04-12 14:15:00", // ou null se nÃ£o foi pago ainda
    refundedAt: null,
    customer: {
      name: "Gabriel Arthur",
      email: "gabriel@email.com",
      phone: "31999999999",
      document: "00000000000",
      country: "BR",
      ip: "127.0.0.1"
    },
    products: [
      {
        id: "pix-tre",
        name: "Taxa TRE",
        planId: null,
        planName: null,
        quantity: 1,
        priceInCents: 7490
      }
    ],
    trackingParameters: {
      src: null,
      sck: null,
      utm_source: "Facebook",
      utm_campaign: "CampanhaTRE",
      utm_medium: "Stories",
      utm_content: null,
      utm_term: null
    },
    commission: {
      totalPriceInCents: 7490,
      gatewayFeeInCents: 300,
      userCommissionInCents: 7190
    }
  })
})
.then(res => res.json())
.then(console.log)
.catch(console.error)
